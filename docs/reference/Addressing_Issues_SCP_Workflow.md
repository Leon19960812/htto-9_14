# Addressing Identified Issues in the SCP Workflow (Problems B, C, D)

Addressing Identified Issues in the SCP Workflow (Problems B, C, D)
Mitigating Trust-Region Oscillations and Load Coupling
One key issue is the oscillation of the objective (compliance) during sequential convex programming iterations, especially when design-dependent loads (shell reactions) are updated each step. This can lead to negative trust-region ratios (ρ < 0) and rejected steps, hurting convergence. Recent research in sequential convex programming (SCP) has shown that such oscillations are an inherent phenomenon of trust-region methods: if the trust region is too rigid, the solution may bounce around the optimum (often called “solution chattering” or the oscillation phenomenon
Soft or Adaptive Trust Regions: Instead of a hard trust-region constraint, treat it as a soft constraint or add it as a penalty term in the objective. This way, when oscillation is detected, the algorithm effectively relaxes the trust-region restriction
Dynamic Penalty on Oscillation: Another effective strategy is to augment the objective with an adaptive penalty term whenever oscillation is observed. Liu et al. (2024) proposed introducing a quadratic penalty to the objective if the objective value starts oscillating between iterations
Trust-Region Adjustment Policies: Fine-tuning the trust-region update logic can also help. The current policy (shrink if ρ is low/negative, expand if ρ is high) can be augmented with oscillation detection. For instance, Xie et al. (2022) suggest detecting oscillation by looking at successive iteration changes; if the algorithm keeps shrinking the radius repeatedly or objective change signs, an oscillation is occurring
Under-Relaxation of Load Updates: In the specific context of the shell-truss coupling, one planned improvement is to freeze or relax the loads during the line search or trust-region step. This is analogous to techniques in partitioned multi-physics simulations where full updates can cause instability. Instead of immediately using the new shell reaction forces after every tiny design change, the algorithm can hold the load fixed for a few inner iterations or interpolate between the old and new loads (under-relaxation). While we did not find a specific paper on “freezing loads” in SCP, this idea is consistent with the broader practice of simultaneous analysis and design (SAND) in structural optimization. In a SAND approach, the design and state (loads, displacements) are solved in one unified formulation, which ensures consistency and can prevent divergent oscillations
Handling Design-Dependent Loads in Structural Optimization
The interaction between the shell FE analysis and the truss optimization means the loading on the truss is design-dependent – as node angles $\theta$ change, the support locations and reaction forces from the shell change. Design-dependent loads are notoriously challenging in structural optimization because the load magnitude, direction, or location changes as the design changes
Continuous Load Interpolation: One approach is to define the load or pressure field as a continuous function of the design variables, to avoid sudden changes. For example, Kumar and Langelaar (2019) treat pressure loads in topology optimization by introducing a fictitious intermediary (Darcy’s law fluid) so that pressure on a disappearing surface gradually tapers off instead of vanishing abruptly
Load Sensitivity and Co-Design: In our problem, a simpler analog would be to incorporate the sensitivity of the support reactions with respect to the node positions into the optimization model. If the derivative $\partial \mathbf{F}_{\text{truss}}/\partial \theta$ is available (perhaps via adjoint analysis of the shell FEA), one could include that in the gradient of compliance. This would make the predicted compliance change more accurate when $\theta$ moves, reducing the discrepancy between predicted and actual $\mathcal{C}$. Some advanced methods treat the reaction forces or other state variables as additional design variables with constraints enforcing equilibrium – essentially a co-design optimization. As noted, simultaneous analysis-design formulations impose the equilibrium constraints alongside design constraints, avoiding the lag between design update and load re-computation
Partitioned Iteration with Relaxation: If fully coupling the analysis is too complex, an alternative is the partitioned iterative approach but with relaxation. In fluid-structure optimization, for instance, one often updates the fluid and structure sequentially but uses an under-relaxation factor to update the loads (or displacements) gradually for stability
Design-Dependent Load in Topology Optimization: It’s worth noting that design-dependent load problems have been studied in topology optimization literature, as these share the issue of changing load application area. Researchers have developed specialized methods (level-set methods, material penalization approaches) to handle loads that move with the boundary
Incorporating Buckling and Stability Constraints (Problem C)
Another challenge (problem C) is how to account for buckling constraints and structural stability in the optimization. The current approach uses an AASI buckling threshold heuristic – essentially imposing a lower bound on cross-sectional area $A_e$ if a member’s compressive force exceeds a critical value. While this is a practical engineering fix, it is not a rigorous or efficient way to enforce stability constraints. In literature, truss optimization with buckling constraints is known to be difficult because the critical buckling load is a non-convex, nonlinear function of the design (it depends on $A$ and the member length in a hyperbolic way)
Local Euler Buckling Constraints: Many works include Euler buckling formulas as constraints on each bar. For example, one can require $\frac{P_e}{A_e} \le \sigma_{\text{allow}}$ where $P_e = \pi^2 E I / L^2$ is the Euler buckling load (with $I$ a function of area for a given section shape). This introduces a nonlinear constraint coupling $A_e$ and $L_e`. Traditional algorithms handle this via iterative linearization or conservative approximations. A recent paper by Cai and Zhou (2024) explicitly incorporated code-based buckling strength (from a design code formula) into truss topology optimization
Global (System) Stability Constraints: Local buckling checks may not be sufficient if the structure as a whole can buckle as a mechanism. Researchers like Rozvany (1996) pointed out that optimizing with only local buckling and stress constraints can lead to erroneous (unstable) designs
Sequential Linear/Convex Approximations: Because buckling constraints are highly non-convex, sequential approximation methods (like the SCP framework itself or others like MMA) are commonly applied. For instance, Zhou and Rozvany (1996) and others used an optimality criteria or sequential linear programming approach where at each step the buckling constraint is linearized or turned into a simpler form
Design Codes and Safety Factors: Another practical approach, if not focusing on theoretical optimality, is to incorporate design code formulas or safety factors for buckling directly into the optimization. The AASI threshold you implemented is one such idea – essentially a safety factor that if compressive force > X, then beef up the area. In the literature, a common simplification is to use different allowable stress for tension and compression (e.g. compression allowed stress = some fraction of yield stress)
In summary, to solve problem C you would likely want to embed buckling constraints into the optimization loop more formally. This could mean using a sequential approximation (treating buckling load as a constraint that is linearized each step, similar to how compliance is handled) or leveraging an existing algorithm like MMA that can natively handle such non-linear constraints robustly
Conclusion
In tackling problems B, C, D, the literature suggests a combination of improved algorithmic strategies and more integrated modeling of the physics. For the oscillation and trust-region issues (B), modern SCP methods favor softening the trust region (through penalties or higher-order terms) and adaptively detecting oscillations
Sources: Recent SCP convergence enhancements

https://www.mdpi.com/2226-4310/11/9/785

https://www.researchgate.net/publication/358888469_Oscillation_Phenomenon_in_Trust-Region-based_Sequential_Convex_Programming_for_the_Nonlinear_Trajectory_Planning_Problem

https://depts.washington.edu/uwrainlab/wordpress/wp-content/uploads/2020/01/ACC_2020.pdf

https://link.springer.com/article/10.1007/BF01742636?error=cookies_not_supported&code=125ad5d3-5f30-47aa-b3c6-ef9dd830cfc1

https://orbit.dtu.dk/files/238101658/marac_nme.6618.pdf

https://onlinelibrary.wiley.com/doi/full/10.1002/eng2.12514

https://www.researchgate.net/publication/327139340_Iterative_coupling_algorithms_for_large_multidomain_problems_with_the_boundary_element_method

https://ui.adsabs.harvard.edu/abs/2018IJNME.115..825E

https://app.iass2024.org/files/IASS_2024_Paper_421.pdf

https://link.springer.com/article/10.1007/BF01197036?error=cookies_not_supported&code=5e12a964-51e0-46c7-aa98-7c45d67d178d

https://orbi.uliege.be/bitstream/2268/100151/1/OA56.pdf

## References
- [1] [2]). In fact, Xie et al. (2022) proved that oscillation is inherent to trust-region SCP for nonlinear problems and derived conditions when it occurs[3][4]. To remedy this, several techniques have been proposed:
- [5] [2]. For example, Xie et al. (2023) introduced a higher-order soft trust-region method that adds trust-region terms (of various orders) directly into the objective function[2]. This approach improved convergence by allowing controlled constraint violations and guiding iterates more smoothly toward the optimum[2]. A follow-up by Xie et al. (2024) combined multiple orders (“hybrid-order” trust regions) to further balance convergence and optimality[2].
- [6] [7]. Their method monitors the history of iteration improvements; once oscillation criteria are met, a penalty term is added (with a weight that updates based on iteration history) to damp the oscillation[6][7]. This variable quadratic penalty essentially biases the next step to prevent back-and-forth toggling, and their results showed it eliminated oscillations and significantly improved SCP convergence[8][9].
- [10] . In such cases, one might halt further shrinkage and instead switch strategy (e.g. apply a soft trust region or penalty as above). By processing the trust region in a softer manner when oscillation occurs, their approach avoided the stagnation or wild jumps that a strict trust-region could cause[5][2].
- [11] [12]. Larsson and Rönnqvist (1995), for example, showed that solving the analysis equations together with the design (via augmented Lagrangian methods) makes the dependency explicit and avoids the guess-update oscillation present in a nested update loop[11][13]. Applying a similar idea here – effectively decoupling the load update frequency from every design step – could stabilize the convergence. In summary, softening the trust-region constraints and smoothing the load updates (either through penalty methods or partial updates) are techniques supported by recent research to resolve oscillation and improve convergence in sequential convex optimization.
- [14] . This can lead to non-smooth objectives and difficulties in computing correct sensitivities, which in turn causes the oscillations discussed above. The literature on topology and shape optimization has several approaches to handle design-dependent loads, which could be informative here:
- [15] [14]. They assign a continuous field that transitions from solid to fluid, ensuring the pressure load evolves smoothly with the topology. The pressure is converted to nodal forces via a consistent formulation, and importantly, analytical sensitivities of the load can be derived[15]. This ensures the optimizer “knows” how loads move/change with design, rather than being surprised by abrupt load re-distributions.
- [11] [16]. While more computationally intensive, such formulations guarantee that any intermediate design remains in equilibrium with some consistent load, thus preventing unphysical load spikes.
- [17] . By analogy, after computing new shell reactions, one could update the truss load vector as $\mathbf{F}{\text{truss}}^{new} = \alpha \mathbf{F}$ with some $0<\alpha<1$. This smooths out large jumps in loading. Although we haven’t found a specific paper on this technique in truss-shell optimization, the approach is well-understood in multiphysics coupling[17][18] and would likely mitigate the sudden compliance “jumps” that violate trust-region predictions.}}^{\text{shell}} + (1-\alpha)\mathbf{F}_{\text{truss}}^{old
- [19] [14]. For example, Allaire et al. (2004) and others treated pressure loads by updating the load as the boundary evolves, and Sigmund & Peterson (1998) introduced methods to handle follower forces. The general consensus is that naive approaches (treating load as fixed or instantly moving) fail, and one must either introduce a continuous model for the load or optimize the load placement concurrently. In summary, applying these insights: we should consider making the load application a smooth function of the design (or at least updating it in a controlled manner). This will ensure the SCP subproblem remains a valid approximation, thereby addressing problem “B” at its root cause.
- [20] [21]. Nevertheless, several techniques have been proposed to handle buckling in a more principled manner:
- [20] . They used a linearized iterative approach: at each iteration, they calculate an allowable stress for each member based on its current buckling capacity, then impose that as a linear constraint for the next iteration[22]. Essentially, the buckling constraint is turned into an adaptively updated stress limit (tighter for longer slender bars). This method successfully ensured no bar violates stability criteria at optimum and is more systematic than a fixed AASI threshold[21][23].
- [24] . One remedy is to include global stability constraints, for instance requiring the lowest eigenvalue of the global stiffness matrix (or geometric stiffness for a buckling analysis) to be above a threshold. Such eigenvalue constraints turn the problem into a nonlinear eigenvalue optimization, which is challenging but can be tackled with iterative schemes. Rozvany suggested that adding system stability constraints (global buckling modes) or introducing slight imperfections in the model can avoid the singular, unstable solutions[25]. In practice, some studies impose a global buckling load factor constraint (e.g., the structure must support some multiple of the load before global buckling). Solving this usually involves computing the smallest eigenvalue of a generalized eigenproblem $K \mathbf{u} = \lambda K_{\text{geom}} \mathbf{u}$ each iteration, and using its sensitivity in optimization – a heavy but doable approach with modern solvers.
- [24] . More recently, Pedersen et al. (2018) (as referenced in Structural and Multidisciplinary Optimization) solved stress- and local-buckling-constrained truss optimization via sequential linear programming with move-limits to ensure stability of the algorithm (this is conceptually similar to SCP, but using linear subproblems)[26]. The use of conservative linearization ensures feasibility with respect to buckling is maintained as the design updates.
- [27] . This indirectly accounts for buckling by making compressive members thicker. While easy to implement, it can be overly conservative or not conservative enough, depending on the structure. The method of Cai and Zhou (2024) mentioned above is an improvement in that they compute the allowable compression stress from an explicit buckling strength formula each iteration rather than a fixed fraction[22][28]. This might be something to consider: integrating a standard code’s buckling curve (like Eurocode or AISC formulas) and updating each member’s minimum required area accordingly each iteration.
- [29] [30]. Keep in mind Rozvany’s warning that even with these constraints, certain ground-structure formulations can produce singular designs[25], so sometimes a slight modification (e.g. preset minimal connectivity or imperfection) is needed for a well-behaved solution.
- [5] [2]. Coupled with that, addressing the root cause – the design-dependent load – via smoothing or partial coupling (as in SAND or load interpolation approaches) will make the optimization more robust[14][11]. For the buckling constraint issue (C), moving beyond a simple threshold to a proper constraint handled by sequential approximation or an optimizer like MMA will yield designs that are both optimal and safe[22][24]. None of these improvements contradict the SCP framework; in fact, they enhance it: by making subproblem approximations more faithful (including load sensitivities, buckling behavior) and the algorithm more stable (less oscillation, no omitted failure modes). Implementing these techniques – drawn from recent research and classical methods – should directly help solve the current challenges (B, C, D) in your project. Each method comes with computational overhead (e.g. computing load sensitivities or eigenvalues), but given the critical nature of convergence and feasibility, they are worthwhile considerations to obtain a reliable and optimal solution.
- [5] [7]; design-dependent load handling in optimization[15][14]; simultaneous analysis-design strategies[11][13]; buckling constraint formulations in truss optimization[20][25].
- [1] [2] [5] [6] [7] [8] [9] Sequential Convex Programming for Reentry Trajectory Optimization Utilizing Modified hp-Adaptive Mesh Refinement and Variable Quadratic Penalty
- [3] [4] (PDF) Oscillation Phenomenon in Trust-Region-Based Sequential Convex Programming for the Nonlinear Trajectory Planning Problem
- [10] depts.washington.edu
- [11] [12] [13] [16] Simultaneous structural analysis and design based on augmented Lagrangian duality | Structural and Multidisciplinary Optimization
- [14] [15] orbit.dtu.dk
- [17] On stability and relaxation techniques for partitioned fluid‐structure ...
- [18] (PDF) Iterative coupling algorithms for large multidomain problems ...
- [19] Level set topology optimization for design-dependent pressure load ...
- [20] [21] [22] [23] [27] [28] A
- [24] [25] [26] Difficulties in truss topology optimization with stress, local buckling and system stability constraints | Structural and Multidisciplinary Optimization
- [29] [30] dcamm.dvi
